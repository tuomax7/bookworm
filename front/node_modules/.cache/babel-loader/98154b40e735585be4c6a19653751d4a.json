{"ast":null,"code":"var _jsxFileName = \"/Users/tuomasnummela/Desktop/bookworm/front/src/components/ReadingUpdater.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ReadingUpdater = props => {\n  _s();\n\n  //Variable state declarations\n  const [pagesRead, setPagesRead] = useState(0);\n  const [totalPagesOfBook, setTotalPagesOfBook] = useState(0);\n  const [bookName, setBookName] = useState('');\n  const [updatingState, setUpdatingState] = useState('start'); //Function declarations\n\n  const select = () => {\n    //Runs when a book is selected on the selector\n    setBookName(document.getElementById('bookSelector').value);\n    setUpdatingState('selected');\n  };\n\n  const newBook = input => {\n    //Runs when new book name input is edited\n    setBookName(input);\n    setUpdatingState('new');\n  }; //The heart of reading updating\n\n\n  const submitReading = () => {\n    const bookSelector = document.getElementById('bookSelector');\n    const knownBook = props.books.find(book => book.name === bookName);\n\n    if (bookName === '') {\n      //BookName input empty and no book selected: ERROR\n      window.alert('Select or enter a book name!');\n      return;\n    }\n\n    if (!bookSelector) {\n      //New book introduced\n      if (props.books.find(book => book.name === bookName)) {\n        //'New' bookName is actually the name of a book previously added: ERROR\n        window.alert('Book has already been added!');\n        return;\n      } else if (bookName === '') {\n        //New bookname is empty: ERROR\n        window.alert('Insert a book name!');\n        return;\n      } else if (isNaN(totalPagesOfBook) || isNaN(pagesRead) || totalPagesOfBook <= 0 || pagesRead <= 0 || pagesRead > totalPagesOfBook) {\n        //Invalid book page count: ERROR\n        window.alert('Invalid page count!');\n        return;\n      } else {\n        //SUCCESS, new book is added onto the booklist\n        const newBook = {\n          'name': bookName,\n          'pages': totalPagesOfBook,\n          'pagesRead': pagesRead\n        };\n        axios.post('http://localhost:3001/api/books', newBook).then(response => {\n          props.setBooks(props.books.concat(response.data));\n        });\n      }\n    } else {\n      //Selected book from known ones\n      if (isNaN(pagesRead) || pagesRead <= 0 || knownBook.pagesRead + pagesRead > knownBook.pages) {\n        //Invalid book page count: ERROR\n        window.alert('Invalid page count!');\n        return;\n      }\n\n      knownBook.pagesRead += pagesRead;\n      axios.put(`http://localhost:3001/api/books/${knownBook.id}`, knownBook).then(response => {\n        props.setBooks(props.books.map(book => book.id !== knownBook.id ? book : response.data));\n      });\n    } //Handle stats and UI updating\n\n\n    const knownStats = {\n      latestDayRead: props.latestDayRead,\n      readByDate: props.readByDate,\n      readingGoal: props.readingGoal,\n      totalPages: props.totalPages,\n      pagesReadToday: props.pagesReadToday,\n      streak: props.streak\n    };\n\n    if (props.streak === 0 && props.pagesReadToday + pagesRead >= props.readingGoal) {\n      //Streak updating after a reset\n      knownStats.streak++;\n      props.setStreak(knownStats.streak);\n      knownStats.readByDate = new Date(props.todayDate.getFullYear(), props.todayDate.getMonth(), props.todayDate.getDate() + 1);\n      props.setReadByDate(knownStats.readByDate);\n    } else if (props.todayDate.getFullYear() === props.readByDate.getFullYear() && props.todayDate.getMonth() === props.readByDate.getMonth() && props.todayDate.getDate() === props.readByDate.getDate() && props.pagesReadToday + pagesRead >= props.readingGoal) {\n      //Normal streak updating handling\n      knownStats.streak++;\n      props.setStreak(knownStats.streak);\n      knownStats.readByDate = new Date(props.readByDate.getFullYear(), props.readByDate.getMonth(), props.readByDate.getDate() + 1);\n      props.setReadByDate(knownStats.readByDate);\n    } //Update latestdayread to keep track of pages read/day\n\n\n    knownStats.latestDayRead = new Date(props.todayDate.getFullYear(), props.todayDate.getMonth(), props.todayDate.getDate());\n    props.setLatestDayRead(knownStats.latestDayRead); //Update pages read (total+daily) and update states of app\n\n    knownStats.pagesReadToday += pagesRead;\n    knownStats.totalPages += pagesRead;\n    props.setPagesReadToday(knownStats.pagesReadToday);\n    props.setTotalPages(knownStats.totalPages);\n    setUpdatingState('start');\n    props.setAppState('start');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Update read books\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 4\n    }, this), updatingState !== 'new' && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Select book:\", /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"bookSelector\",\n        defaultValue: \"default\",\n        onChange: select,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"default\",\n          disabled: true,\n          hidden: true,\n          children: \"Choose here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 5\n        }, this), props.books.map(book => /*#__PURE__*/_jsxDEV(\"option\", {\n          children: book.name\n        }, book.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 32\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 33\n    }, this), updatingState !== 'selected' && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"... or add a new one:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"book name here...\",\n        onChange: event => newBook(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"page count here...\",\n        onChange: event => setTotalPagesOfBook(Number(event.target.value))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 38\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Pages read:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"read pages here...\",\n        onChange: event => setPagesRead(Number(event.target.value))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: submitReading,\n      children: \"Submit pages read!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 3\n  }, this);\n};\n\n_s(ReadingUpdater, \"tSXsLQKJXl6WnPmvDlJUQEa1o7U=\");\n\n_c = ReadingUpdater;\nexport default ReadingUpdater;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReadingUpdater\");","map":{"version":3,"sources":["/Users/tuomasnummela/Desktop/bookworm/front/src/components/ReadingUpdater.js"],"names":["React","useState","axios","ReadingUpdater","props","pagesRead","setPagesRead","totalPagesOfBook","setTotalPagesOfBook","bookName","setBookName","updatingState","setUpdatingState","select","document","getElementById","value","newBook","input","submitReading","bookSelector","knownBook","books","find","book","name","window","alert","isNaN","post","then","response","setBooks","concat","data","pages","put","id","map","knownStats","latestDayRead","readByDate","readingGoal","totalPages","pagesReadToday","streak","setStreak","Date","todayDate","getFullYear","getMonth","getDate","setReadByDate","setLatestDayRead","setPagesReadToday","setTotalPages","setAppState","event","target","Number"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useState } from 'react';\nimport axios from 'axios';\n\nconst ReadingUpdater = (props) => {\n\n\n\t//Variable state declarations\n\tconst [ pagesRead, setPagesRead ] = useState(0);\n\tconst [ totalPagesOfBook, setTotalPagesOfBook ] = useState(0);\n\tconst [ bookName, setBookName ] = useState('');\n\tconst [ updatingState, setUpdatingState ] = useState('start');\n\n\n\t//Function declarations\n\n\tconst select = () => {\n\t\t//Runs when a book is selected on the selector\n\t\tsetBookName(document.getElementById('bookSelector').value);\n\t\tsetUpdatingState('selected');\n\t}\n\n\tconst newBook = (input) => {\n\t\t//Runs when new book name input is edited\n\t\tsetBookName(input);\n\t\tsetUpdatingState('new');\n\t}\n\n\n\t//The heart of reading updating\n\n\n\tconst submitReading = () => {\n\n\t\tconst bookSelector = document.getElementById('bookSelector');\n\n\t\tconst knownBook = props.books.find(book => book.name === bookName);\n\n\n\n\t\tif(bookName === ''){\n\t\t\t//BookName input empty and no book selected: ERROR\n\t\t\twindow.alert('Select or enter a book name!')\n\t\t\treturn;\n\t\t}\n\n\n\t\tif(!bookSelector){\n\t\t\t//New book introduced\n\n\t\t\tif(props.books.find((book) => book.name === bookName)){\n\t\t\t\t//'New' bookName is actually the name of a book previously added: ERROR\n\t\t\t\twindow.alert('Book has already been added!')\n\t\t\t\treturn;\n\n\t\t\t}else if(bookName === ''){\n\t\t\t\t//New bookname is empty: ERROR\n\t\t\t\twindow.alert('Insert a book name!')\n\t\t\t\treturn;\n\n\t\t\t}else if(isNaN(totalPagesOfBook) || isNaN(pagesRead) || \n\t\t\t\ttotalPagesOfBook <= 0 || pagesRead <= 0 || pagesRead > totalPagesOfBook){\n\t\t\t\t//Invalid book page count: ERROR\n\t\t\t\twindow.alert('Invalid page count!')\n\t\t\t\treturn;\n\n\t\t\t}else{\n\t\t\t\t//SUCCESS, new book is added onto the booklist\n\t\t\t\tconst newBook = {\n\t\t\t\t\t'name': bookName,\n\t\t\t\t\t'pages': totalPagesOfBook,\n\t\t\t\t\t'pagesRead': pagesRead\n\t\t\t\t}\n\n\t\t\t\taxios\n    \t\t\t\t.post('http://localhost:3001/api/books', newBook)\n    \t\t\t\t.then(response => {\n      \t\t\t\t props.setBooks(props.books.concat(response.data))\n    \t\t\t})\n\n\t\t\t}\n\t\t}else{\n\t\t\t//Selected book from known ones\n\n\t\t\tif(isNaN(pagesRead) || pagesRead <= 0 || knownBook.pagesRead+pagesRead > knownBook.pages){\n\t\t\t\t//Invalid book page count: ERROR\n\t\t\t\twindow.alert('Invalid page count!')\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tknownBook.pagesRead += pagesRead;\n\t\t\t\n\t\t\taxios.put(`http://localhost:3001/api/books/${knownBook.id}`, knownBook).then(response => {\n    \t\t\tprops.setBooks(props.books.map(book => book.id !== knownBook.id ? book : response.data))\n  \t\t\t})\n\n\t\t}\n\n\t\t//Handle stats and UI updating\n\t\tconst knownStats = {\n\t\t\tlatestDayRead: props.latestDayRead,\n\t\t\treadByDate: props.readByDate,\n\t\t\treadingGoal: props.readingGoal,\n\t\t\ttotalPages: props.totalPages,\n\t\t\tpagesReadToday: props.pagesReadToday,\n\t\t\tstreak: props.streak\n\t\t}\n\n\n\t\tif(props.streak === 0 && props.pagesReadToday+pagesRead >= props.readingGoal){\n\n\t\t\t//Streak updating after a reset\n\t\t\tknownStats.streak++;\n\t\t\tprops.setStreak(knownStats.streak);\n\n\t\t\tknownStats.readByDate = \n\t\t\tnew Date(props.todayDate.getFullYear(), \n\t\t\t\tprops.todayDate.getMonth(), props.todayDate.getDate()+1);\n\n\t\t\tprops.setReadByDate(knownStats.readByDate);\n\n\n\t\t}else if(props.todayDate.getFullYear() === props.readByDate.getFullYear() &&\n\t\t\tprops.todayDate.getMonth() === props.readByDate.getMonth() &&\n\t\t\tprops.todayDate.getDate() === props.readByDate.getDate() && props.pagesReadToday+pagesRead >= props.readingGoal){\n\n\t\t\t//Normal streak updating handling\n\n\t\t\tknownStats.streak++;\n\t\t\tprops.setStreak(knownStats.streak);\n\n\t\t\tknownStats.readByDate = \n\t\t\tnew Date(props.readByDate.getFullYear(), \n\t\t\t\tprops.readByDate.getMonth(), props.readByDate.getDate()+1);\n\n\t\t\tprops.setReadByDate(knownStats.readByDate);\n\t\t}\n\n\t\t//Update latestdayread to keep track of pages read/day\n\n\t\tknownStats.latestDayRead = \n\t\tnew Date(props.todayDate.getFullYear(),\n\t\t\tprops.todayDate.getMonth(), props.todayDate.getDate());\n\n\t\tprops.setLatestDayRead(knownStats.latestDayRead);\n\n\n\t\t//Update pages read (total+daily) and update states of app\n\t\tknownStats.pagesReadToday += pagesRead;\n\t\tknownStats.totalPages += pagesRead;\n\t\t\n\t\tprops.setPagesReadToday(knownStats.pagesReadToday);\n\t\tprops.setTotalPages(knownStats.totalPages);\n\n\n\t\tsetUpdatingState('start');\n\t\tprops.setAppState('start');\n\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<h3>Update read books</h3>\n\n\t\t\t{updatingState !== 'new' && (<p>Select book:\n\n\t\t\t<select id='bookSelector' defaultValue='default' onChange={select}>\n\n\t\t\t\t<option value='default' disabled hidden>Choose here</option>\n\n\t\t\t\t{props.books.map((book) => <option key={book.name}>{book.name}</option>)}\n\n\t\t\t</select>\n\n\t\t\t</p>)}\n\n\n\t\t\t{updatingState !== 'selected' && (<p>... or add a new one: \n\n\t\t\t<input type='text' placeholder='book name here...' \n\t\t\tonChange={event => newBook(event.target.value)}/> \n\n\n\t\t\t<input type='text' placeholder='page count here...'\n\t\t\tonChange={event => setTotalPagesOfBook(Number(event.target.value))}/>\n\n\t\t\t</p>)}\n\t\t\t\n\n\t\t\t<p>Pages read: \n\t\t\t<input type='text' placeholder='read pages here...' \n\t\t\tonChange={event => setPagesRead(Number(event.target.value))} />\n\t\t\t</p>\n\n\t\t\t<button onClick={submitReading}>Submit pages read!</button>\n\t\t</div>\n\t);\n}\n\n\nexport default ReadingUpdater;"]},"metadata":{},"sourceType":"module"}